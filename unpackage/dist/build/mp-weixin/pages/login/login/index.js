(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login/index"],{"09e5":function(t,e,o){"use strict";(function(t){o("7c19");i(o("66fd"));var e=i(o("b759"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"5e38":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o("bbcf"),n={mixins:[i.goBack,i.jumpBackPage],data:function(){return{maxMobile:11,mobile:"",code:"",user_wx_id:"",verification:!0,timer:60,btnb:"btn btn-square btn-c btn-all",type:"",isWeixinBrowser:this.$common.isWeiXinBrowser()}},onLoad:function(e){e.user_wx_id&&(this.user_wx_id=e.user_wx_id,t.setNavigationBarTitle({title:"绑定手机号"}))},computed:{rightMobile:function(){var t={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?t.status=!0:(t.status=!1,t.msg="手机号格式不正确"):(t.status=!1,t.msg="请输入手机号"),t},sendCodeBtn:function(){var t="btn btn-g";return this.mobile.length===this.maxMobile&&this.rightMobile.status?t+" btn-b":t},regButtonClass:function(){return this.mobile&&this.mobile.length===this.maxMobile&&this.code?this.btnb+" btn-b":this.btnb},logoImage:function(){return this.$store.state.config.shop_logo}},onShow:function(){var e=this,o=e.$db.get("userToken");if(o)return t.switchTab({url:"/pages/member/index/index"}),!0;e.timer=parseInt(e.$db.get("timer")),null!=e.timer&&e.timer>0&&(e.countDown(),e.verification=!1)},methods:{sendCode:function(){var t=this;this.rightMobile.status?(this.$common.loadToShow("发送中..."),setTimeout((function(){t.$common.loadToHide(),t.$api.sms({mobile:t.mobile,code:"login"},(function(e){e.status?(t.timer=60,t.verification=!1,t.$common.successToShow(e.msg),t.countDown()):t.$common.errorToShow(e.msg)}))}),1e3)):this.$common.errorToShow(this.rightMobile.msg)},toReg:function(){this.$common.navigateTo("/pages/login/register/index")},countDown:function(){var e=this,o=setInterval((function(){e.timer--,t.setStorage({key:"timer",data:e.timer,success:function(){}}),e.timer<=0&&(e.verification=!0,clearInterval(o))}),1e3)},login:function(){var t=this,e=this;if(e.rightMobile.status)if(e.code){var o={mobile:e.mobile,code:e.code},i=e.$db.get("invitecode");i&&(o.invitecode=i),e.$api.smsLogin(o,(function(o){o.status?(t.$db.set("userToken",o.data),e.redirectHandler()):e.$common.errorToShow(o.msg)}))}else e.$common.errorToShow("请输入短信验证码!");else e.$common.errorToShow(e.rightMobile.msg)},redirectHandler:function(){var t=this;this.$common.successToShow("登录成功!",(function(){t.$db.set("timer",0),t.$db.del("invitecode"),t.handleBack()}))},toLogin:function(){t.navigateTo({url:"../../login/login/index"})},showTopTips:function(){var e=this;if(""==e.mobile)return e.$common.errorToShow("请输入手机号码"),!1;if(""==this.code)return e.$common.errorToShow("请输入验证码"),!1;if(0==e.user_wx_id)return e.$common.errorToShow("登录失败，请稍后再试",(function(){t.navigateBack({delta:1})})),!1;var o=2,i={mobile:e.mobile,code:e.code,platform:o,user_wx_id:e.user_wx_id},n=e.$db.get("invitecode");n&&(i.invitecode=n),e.$api.smsLogin(i,(function(t){t.status?(e.$db.set("userToken",t.data),e.redirectHandler()):e.$common.errorToShow(t.msg)}))},toBind:function(){var t=this;if(""==this.mobile)return this.$common.errorToShow("请输入手机号码"),!1;if(""==this.code)return this.$common.errorToShow("请输入验证码"),!1;var e={mobile:this.mobile,code:this.code,user_wx_id:this.user_wx_id},o=this.$db.get("invitecode");o&&(e.invitecode=o),this.$api.smsLogin(e,(function(e){e.status?(t.$db.set("userToken",e.data),t.redirectHandler()):t.$common.errorToShow(e.msg)}))},selectLoginType:function(){this.$common.redirectTo("./index1")},goAgreement:function(){var t=this.$store.state.config.user_agreement_id;this.$common.navigateTo("/pages/article/index?id_type=1&id="+t)},goPrivacy:function(){var t=this.$store.state.config.privacy_policy_id;this.$common.navigateTo("/pages/article/index?id_type=1&id="+t)},goForgetpwd:function(){this.$common.navigateTo("/pages/login/forget/forget")}}};e.default=n}).call(this,o("543d")["default"])},"6b8b":function(t,e,o){"use strict";var i=o("8b4b"),n=o.n(i);n.a},"8b4b":function(t,e,o){},a216:function(t,e,o){"use strict";o.r(e);var i=o("5e38"),n=o.n(i);for(var r in i)"default"!==r&&function(t){o.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},b759:function(t,e,o){"use strict";o.r(e);var i=o("dffc"),n=o("a216");for(var r in n)"default"!==r&&function(t){o.d(e,t,(function(){return n[t]}))}(r);o("6b8b");var s,c=o("f0c5"),a=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=a.exports},dffc:function(t,e,o){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},r=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return i}))}},[["09e5","common/runtime","common/vendor"]]]);