(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login/index1"],{"22b7":function(t,i,e){"use strict";e.r(i);var n=e("28ac"),o=e("84ef");for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);e("bbe5");var s,r=e("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);i["default"]=c.exports},"28ac":function(t,i,e){"use strict";var n,o=function(){var t=this,i=t.$createElement;t._self._c},a=[];e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}))},"58a0":function(t,i,e){},"84ef":function(t,i,e){"use strict";e.r(i);var n=e("91c2"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},"91c2":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("cf70"),o=e("bbcf"),a={mixins:[o.goBack,o.jumpBackPage],data:function(){return{maxMobile:11,mobile:"",pwd:"",isCaptcha:!1,captcha:"",captchaUrl:"",btnb:"btn btn-square btn-c btn-all",weixinBrowser:!1,thirdPartyLogins:[]}},onLoad:function(t){t.invitecode&&this.$db.set("invitecode",t.invitecode),this.weixinBrowser=this.$common.isWeiXinBrowser(),this.weixinBrowser&&this.getAuths()},onShow:function(){this.$db.get("userToken")&&t.switchTab({url:"/pages/index/index"})},computed:{loginButtonClass:function(){return this.mobile&&11===this.mobile.length&&this.pwd?this.btnb+" btn-b":this.btnb},logoImage:function(){return this.$store.state.config.shop_logo},getThirdLoginImg:function(t){return function(t){return"Wxofficial"==t?"/static/image/ic-wechat.png":"weixin"==t?"/static/image/ic-wechat.png":void 0}}},methods:{rightMobile:function(){var t={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?this.pwd?t.status=!0:(t.status=!1,t.msg="请输入密码"):(t.status=!1,t.msg="手机号格式不正确"):(t.status=!1,t.msg="请输入手机号"),t},loginHandler:function(){this.mobile&&11===this.mobile.length&&this.pwd&&(this.rightMobile().status?this.toLogin():this.$common.errorToShow(this.rightMobile().msg))},getCaptchaUrl:function(){this.captchaUrl=this.$config.apiBaseUrl+"captcha.html"},toReg:function(){this.$common.navigateTo("/pages/login/register/index")},toLogin:function(){var t=this,i={mobile:this.mobile,password:this.pwd};this.isCaptcha&&(i.captcha=this.captcha);var e=this.$db.get("invitecode");e&&(i.invitecode=e),this.$api.login(i,(function(i){i.status?(t.$db.set("userToken",i.data),t.redirectHandler()):t.$common.errorToShow(i.msg,(function(){10013!==i.data&&10012!==i.data||(t.isCaptcha=!0),t.isCaptcha&&t.getCaptchaUrl()}))}))},redirectHandler:function(){this.$db.del("invitecode"),this.handleBack()},selectLoginType:function(){this.$common.redirectTo("/pages/login/login/index")},getAuths:function(){var t=this,i={url:n.baseUrl+"wap/pages/author"};this.$api.getTrustLogin(i,(function(i){i.status&&(t.thirdPartyLogins=i.data)}))},handleThirdLogin:function(t){this.$common.redirectTo("");var i=this.$store.state.redirectPage;this.$db.set("redirectPage",i),window.location.href=t},getAppAuths:function(){var i=this;i.thirdPartyLogins=[],t.getProvider({service:"oauth",success:function(t){"getProvider:ok"==t.errMsg&&(i.thirdPartyLogins=t.provider)}})},handleThirdLoginApp:function(i){t.showLoading({title:"加载中"});var e=this;t.login({provider:i,success:function(n){t.getUserInfo({provider:i,success:function(n){if("getUserInfo:ok"==n.errMsg){var o={user:n.userInfo,type:i},a=e.$db.get("invitecode");a&&(o.invitecode=a),e.$api.appTrustLogin(o,(function(i){if(t.hideLoading(),i.status){if("undefined"!=typeof i.data.token)return e.$db.set("userToken",i.data.token),t.navigateBack({delta:1}),!1;t.redirectTo({url:"/pages/login/login/index?user_wx_id="+i.data.user_wx_id})}else e.$common.errorToShow("登录失败，请重试")}))}else t.hideLoading(),e.$common.errorToShow("登录失败，请重试")}})}})},goAgreement:function(){var t=this.$store.state.config.user_agreement_id;this.$common.navigateTo("/pages/article/index?id_type=1&id="+t)},goPrivacy:function(){var t=this.$store.state.config.privacy_policy_id;this.$common.navigateTo("/pages/article/index?id_type=1&id="+t)},goForgetpwd:function(){this.$common.navigateTo("/pages/login/forget/forget")}}};i.default=a}).call(this,e("543d")["default"])},a33d:function(t,i,e){"use strict";(function(t){e("7c19");n(e("66fd"));var i=n(e("22b7"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},bbe5:function(t,i,e){"use strict";var n=e("58a0"),o=e.n(n);o.a}},[["a33d","common/runtime","common/vendor"]]]);