(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/index"],{"2d95":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c},r=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))},"49cd":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{awardsConfig:{chance:!0,prize:[]},awardsList:{},animationData:{},btnDisabled:"",thanksarr:[],chishu:0,mold:1,r_flg:0,myPrizelist:[],jifen:0}},onLoad:function(){this.initdata(this)},onReady:function(t){},methods:{getmyPrize:function(){var t=this;this.$api.myLottery({page:1,limit:1e3},(function(e){t.myPrizelist=e.data,t.r_flg=1}))},openshadow:function(){this.r_flg=1},closeshadow:function(){this.r_flg=0},initdata:function(e){var i=this;this.$api.lotteryConfig((function(e){if(e.status){i.awardsConfig=e.data,i.chishu=e.data.user.day_remaining,i.jifen=e.data.user.jifen;i.awardsConfig.prize.length;i.awardsConfig.prize.forEach((function(t,e){t.index=e})),i.drawAwardRoundel()}else i.$common.errorToShow(e.msg,(function(){t.navigateBack({delta:1})}))}))},drawAwardRoundel:function(){for(var t=this.awardsConfig.prize,e=[],i=1/t.length*360,n=0;n<t.length;n++)e.push({turn:n*i+"deg",lineTurn:n*i+i/2+"deg",award:t[n].title,type:t[n].type,id:t[n].id});this.chishu<1&&this.jifen<this.awardsConfig.integral_exchange?this.btnDisabled="disabled":this.awardsConfig.user.lottery?this.btnDisabled="":this.btnDisabled="disabled",this.awardsList=e},playReward:function(){var t=this;if(this.chishu<1){if(this.jifen<this.awardsConfig.integral_exchange)return this.$common.errorToShow("抽奖次数已经用完"),!1;this.jifen>=this.awardsConfig.integral_exchange&&this.$common.modelShow("提示","本次抽奖将消耗"+this.awardsConfig.integral_exchange+"积分，确认吗？",(function(e){t.lottery()}))}else this.lottery()},lottery:function(){var e=this;this.$api.lottery((function(i){if(i.status){var n=0,a=i.data.result;e.awardsList.forEach((function(t,e){t.id==a.id&&(n=e)}));var r=e.awardsConfig.prize,o=4,s=3686;e.runDeg=e.runDeg||0;e.runDeg;e.runDeg=e.runDeg+(360-e.runDeg%360)+(360*o-n*(360/r.length))+1;var u=t.createAnimation({duration:s,timingFunction:"ease"});u.rotate(e.runDeg).step(),e.animationData=u.export(),e.btnDisabled="disabled";var d=e.awardsConfig,c=d.prize[n].type;if(e.jifen=e.chishu<=0?e.jifen-d.integral_exchange>=0?e.jifen-d.integral_exchange:0:e.jifen,e.chishu=e.chishu>1?e.chishu-1:0,0!=c){var f=e.getPrizeMsg(d.prize[n].type,d.prize[n].val);setTimeout(function(){this.$common.modelShow("恭喜","获得"+d.prize[n].title+"，"+f,(function(t){setTimeout((function(){document.getElementById("zhuanpano").style=""}),1e3)}),!1),i.data.is_lottery.lottery?this.btnDisabled="":this.btnDisabled="disabled"}.bind(e),s)}else setTimeout(function(){this.$common.modelShow("很遗憾","没中奖，再接再厉！",(function(t){setTimeout((function(){document.getElementById("zhuanpano").style=""}),1e3)}),!1),i.data.is_lottery.lottery?this.btnDisabled="":this.btnDisabled="disabled"}.bind(e),s)}else e.$common.modelShow("提示",i.msg)}))},getPrizeMsg:function(t,e){var i="";switch(t){case 1:i="积分："+e+"个";break;case 2:i="优惠券：“"+e+"” 一张";break;case 3:i="余额："+e+"元";break;case 4:i="商品：“"+e+"”";break;default:break}return i}}};e.default=i}).call(this,i("543d")["default"])},"65a4":function(t,e,i){"use strict";i.r(e);var n=i("2d95"),a=i("e143");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("bace");var o,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"18e939eb",null,!1,n["a"],o);e["default"]=u.exports},bace:function(t,e,i){"use strict";var n=i("c138"),a=i.n(n);a.a},c138:function(t,e,i){},e143:function(t,e,i){"use strict";i.r(e);var n=i("49cd"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},e589:function(t,e,i){"use strict";(function(t){i("7c19");n(i("66fd"));var e=n(i("65a4"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])}},[["e589","common/runtime","common/vendor"]]]);