(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/payment/auth"],{"2d1a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{type:"",openid:"",orderId:"",state:""}},onLoad:function(e){this.orderId=e.order_id,this.money=Number(e.money),this.type=Number(e.type),this.uid=Number(e.uid),this.state=this.$common.getQueryString("state"),this.getCode()},methods:{getCode:function(){var e=this.$common.getQueryString("code");e&&this.getOpenId(e)},getOpenId:function(e){var t=this,n={code:e,scope:2,state:this.state};this.$api.getOpenId(n,(function(e){e.status?(t.openid=e.data.openid,t.toPayHandler("wechatpay")):t.$common.errorToShow(e.msg)}))},checkWXJSBridge:function(e){var t=this,n=setInterval((function(){"undefined"!=typeof window.WeixinJSBridge&&(clearTimeout(n),t.onBridgeReady(e))}),200)},onBridgeReady:function(e){var t=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appid,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(function(n){"get_brand_wcpay_request:ok"===n.err_msg?t.$common.successToShow("支付成功"):"get_brand_wcpay_request:cancel"===n.err_msg?t.$common.errorToShow("取消支付"):t.$common.errorToShow("支付失败"),setTimeout((function(){t.$common.redirectTo("/pages/goods/payment/result?id="+e.payment_id)}),1e3)}))},toPayHandler:function(e){var t=this,n={payment_code:e,payment_type:this.type};n["ids"]=1==this.type||5==this.type||6==this.type?this.orderId:this.uid,1==this.type&&this.orderId?this.openid&&(n["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid}):2==this.type&&this.money?this.openid&&(n["params"]={trade_type:"JSAPI_OFFICIAL",money:this.money,openid:this.openid}):5!=this.type&&6!=this.type||!this.recharge||(n["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid,formid:this.orderId}),this.$api.pay(n,(function(e){if(e.status){var n=e.data;t.checkWXJSBridge(n)}else t.$common.errorToShow(e.msg)}))}}};t.default=i},"2ec3":function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}))},"49a9":function(e,t,n){"use strict";n.r(t);var i=n("2ec3"),o=n("a233");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("ebf4");var a,s=n("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);t["default"]=d.exports},9480:function(e,t,n){"use strict";(function(e){n("7c19");i(n("66fd"));var t=i(n("49a9"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},a233:function(e,t,n){"use strict";n.r(t);var i=n("2d1a"),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},c2ec:function(e,t,n){},ebf4:function(e,t,n){"use strict";var i=n("c2ec"),o=n.n(i);o.a}},[["9480","common/runtime","common/vendor"]]]);