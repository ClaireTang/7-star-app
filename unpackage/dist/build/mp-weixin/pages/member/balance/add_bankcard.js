(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/balance/add_bankcard"],{7939:function(e,a,t){},"97bf":function(e,a,t){"use strict";var i,n=function(){var e=this,a=e.$createElement;e._self._c},s=[];t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return s})),t.d(a,"a",(function(){return i}))},"9ce3":function(e,a,t){"use strict";t.r(a);var i=t("97bf"),n=t("afb5");for(var s in n)"default"!==s&&function(e){t.d(a,e,(function(){return n[e]}))}(s);t("a6f2");var o,r=t("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);a["default"]=c.exports},a6f2:function(e,a,t){"use strict";var i=t("7939"),n=t.n(i);n.a},afb5:function(e,a,t){"use strict";t.r(a);var i=t("fe67"),n=t.n(i);for(var s in i)"default"!==s&&function(e){t.d(a,e,(function(){return i[e]}))}(s);a["default"]=n.a},f966:function(e,a,t){"use strict";(function(e){t("7c19");i(t("66fd"));var a=i(t("9ce3"));function i(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("543d")["createPage"])},fe67:function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=function(){t.e("components/area-picker/areaPicker").then(function(){return resolve(t("5c79"))}.bind(null,t)).catch(t.oe)},n={components:{areaPicker:i},data:function(){return{bankName:"",cardType:1,cardTypeName:"",bankCode:"",accountBank:"",cardNumber:"",name:"",mobile:"",region:["北京市","北京市","东城区"],areaId:110101,address:"",is_def:2,checked:!1,pickerValue:"",defaultIndex:[0,0,0],submitStatus:!1}},computed:{},methods:{showThreePicker:function(){this.$refs.areaPicker.showPicker()},onConfirm:function(a){var t=this,i=a[0].name,n=a[1].name,s=a[2].name;this.pickerValue=a[0].name+" "+a[1].name+" "+a[2].name;var o={province_name:i,city_name:n,county_name:s};this.$api.getAreaId(o,(function(a){a.status?t.areaId=a.data:e.showModal({title:"提示",content:"地区选择出现问题，请重新选择地区",showCancel:!1})}))},defaultChange:function(){this.checked=!this.checked,this.is_def=1===this.is_def?2:1},saveShip:function(){var a=this;if(this.id&&0!=this.id){var t={id:this.id,name:this.name,address:this.address,mobile:this.mobile,is_def:this.is_def};t["area_id"]=this.areaId,this.$api.editShip(t,(function(t){t.status?a.$common.successToShow("编辑成功",(function(){e.navigateBack({delta:1})})):a.$common.errorToShow(t.msg)}))}else{var i={area_id:this.areaId,name:this.name,address:this.address,mobile:this.mobile,is_def:this.is_def};this.$api.saveUserShip(i,(function(t){t.status?a.$common.successToShow("添加成功",(function(){e.navigateBack({delta:1})})):a.$common.errorToShow(t.msg)}))}},checkCard:function(){var e=this;if(this.cardNumber){var a={card_code:this.cardNumber};this.$api.getBankCardOrganization(a,(function(a){if(a.status){var t=a.data;e.bankName=t.name,e.cardType=t.type,e.bankCode=t.bank_code,e.cardTypeName=t.type_name}else e.$common.errorToShow(a.msg,(function(){e.bankCode=e.bankName=e.cardType=e.cardTypeName=""}))}))}else this.bankCode=this.bankName=this.cardType=this.cardTypeName=""},addCard:function(){var a=this;if(this.cardNumber)if(this.bankName&&this.cardType&&this.bankCode)if(/^[\u4E00-\u9FA5\uf900-\ufa2d·s]{2,30}$/.test(this.name))if(this.areaId)if(this.accountBank){this.submitStatus=!0;var t={bankName:this.bankName,areaId:this.areaId,accountBank:this.accountBank,accountName:this.name,bankCode:this.bankCode,cardNumber:this.cardNumber,cardType:this.cardType,isDefault:this.is_def};this.$api.addBankCard(t,(function(t){t.status?a.$common.successToShow(t.msg,(function(a){e.navigateBack({delta:1})})):a.$common.errorToShow(t.msg)}),(function(e){a.submitStatus=!1}))}else this.$common.errorToShow("请输入开户银行信息");else this.$common.errorToShow("请选择开户行所在地区");else this.$common.errorToShow("请输入正确的持卡人名称");else this.$common.errorToShow("请输入正确的银行卡号");else this.$common.errorToShow("请输入银行卡号")}},onLoad:function(e){e.ship_id?(this.id=e.ship_id,this.getShipInfo()):this.pickerValue=this.region[0]+" "+this.region[1]+" "+this.region[2]},onBackPress:function(){if(this.$refs.areaPicker.pickerShow)return this.$refs.areaPicker.closePicker(),!0}};a.default=n}).call(this,t("543d")["default"])}},[["f966","common/runtime","common/vendor"]]]);