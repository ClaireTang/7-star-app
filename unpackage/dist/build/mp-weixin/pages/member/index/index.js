(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/index/index"],{"4f48":function(i,t,n){"use strict";var e,o=function(){var i=this,t=i.$createElement;i._self._c},a=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return e}))},"5f37":function(i,t,n){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n("bbcf"),o=function(){n.e("components/jihai-copyright/jihaiCopyright").then(function(){return resolve(n("f12a"))}.bind(null,n)).catch(n.oe)},a={components:{jihaiCopyright:o},mixins:[e.checkLogin],data:function(){return{open_id:"",hasLogin:!1,userInfo:{},kefupara:"",afterSaleNums:0,isClerk:!1,alipayNoLogin:!0,alipayName:"",alipayAvatar:"",config:"",orderItems:[{name:"待付款",icon:"/static/image/me-ic-obligation.png",nums:0},{name:"待发货",icon:"/static/image/me-ic-sendout.png",nums:0},{name:"待收货",icon:"/static/image/me-ic-receiving.png",nums:0},{name:"待评价",icon:"/static/image/me-ic-evaluate.png",nums:0}],utilityMenus:{distribution:{name:"分销中心",icon:"/static/image/distribution.png",router:"../distribution/user",unshowItem:!1},coupon:{name:"我的优惠券",icon:"/static/image/ic-me-coupon.png",router:"../coupon/index",unshowItem:!1},balance:{name:"我的余额",icon:"/static/image/ic-me-balance.png",router:"../balance/index",unshowItem:!1},invoice:{name:"我的发票",icon:"/static/image/ic-me-invoice.png",router:"../invoice/index",unshowItem:!1},integral:{name:"我的积分",icon:"/static/image/integral.png",router:"../integral/index",unshowItem:!1},address:{name:"地址管理",icon:"/static/image/me-ic-site.png",router:"../address/list",unshowItem:!1},collection:{name:"我的收藏",icon:"/static/image/ic-me-collect.png",router:"../collection/index",unshowItem:!1},history:{name:"我的足迹",icon:"/static/image/ic-me-track.png",router:"../history/index",unshowItem:!1}},clerk:[{name:"提货单列表",icon:"/static/image/ic-me-take.png",router:"../take_delivery/list"},{name:"提货单核销",icon:"/static/image/me-ic-about.png",router:"../take_delivery/index"}],order:{invite:{name:"邀请好友",icon:"/static/image/ic-me-invite.png",router:"../invite/index",unshowItem:!0},setting:{name:"系统设置",icon:"/static/image/me-ic-set.png",router:"../setting/index",unshowItem:!1}},list:2,suTipStatus:!1}},onShow:function(){this.initData()},methods:{goLogin:function(){i.navigateTo({url:"/pages/login/choose/index"})},getUserInfo:function(i){var t=this;if("getUserInfo:fail auth deny"==i.detail.errMsg)t.$common.errorToShow("未授权");else{var n={open_id:t.open_id,iv:i.detail.iv,edata:i.detail.encryptedData,signature:i.detail.signature},e=t.$db.get("invitecode");e&&(n.invitecode=e),t.toWxLogin(n)}},getALICode:function(){var t=this,n=this;i.login({scopes:"auth_user",success:function(e){e.authCode?i.getUserInfo({provider:"alipay",success:function(i){if("getUserInfo:ok"==i.errMsg){var t={nickname:i.nickName,avatar:i.avatar};n.aLiLoginStep1(e.authCode,t)}},fail:function(i){this.$common.errorToShow("未取得用户昵称头像信息")}}):t.$common.errorToShow("未取得code")},fail:function(i){this.$common.errorToShow("用户授权失败my.login")}})},getWxCode:function(){var t=this;i.login({scopes:"auth_user",success:function(i){i.code?t.wxLoginStep1(i.code):this.$common.errorToShow("未取得code")},fail:function(i){this.$common.errorToShow("用户授权失败wx.login")}})},wxLoginStep1:function(t){var n=this;this.$api.login1({code:t},(function(t){t.status?n.open_id=t.data:n.$common.errorToShow(t.msg,(function(){i.navigateBack({delta:1})}))}))},aLiLoginStep1:function(i,t){var n=this,e={code:i,user_info:t};this.$api.alilogin1(e,(function(i){n.alipayNoLogin=!1,i.status?(n.open_id=i.data.user_wx_id,i.data.hasOwnProperty("token")?(n.$db.set("userToken",i.data.token),n.initData()):n.$common.redirectTo("/pages/login/login/index?user_wx_id="+i.data.user_wx_id)):n.$common.errorToShow(i.msg)}))},toWxLogin:function(t){var n=this;n.$api.login2(t,(function(t){t.status?"undefined"==typeof t.data.token?i.redirectTo({url:"/pages/login/login/index?user_wx_id="+t.data.user_wx_id}):(n.$db.set("userToken",t.data.token),n.initData()):n.$common.errorToShow("登录失败，请重试")}))},toLogin:function(){this.$common.navigateTo("../../login/login/index1")},initData:function(){var i=this,t=this;this.$api.shopConfig((function(t){i.config=t,t.open_distribution?i.order.invite.unshowItem=!0:(i.utilityMenus.distribution.unshowItem=!0,i.order.invite.unshowItem=!1)})),this.$db.get("userToken")?(this.hasLogin=!0,this.$api.userInfo({},(function(n){if(n.status){t.userInfo=n.data;var e={};e.nickName=n.data.nickname,e.tel=n.data.mobile,t.kefupara=JSON.stringify(e);var o={ids:"1,2,3,4",isAfterSale:!0};t.$api.getOrderStatusSum(o,(function(i){i.status&&(t.orderItems.forEach((function(t,n){t.nums=i.data[n+1]})),t.afterSaleNums=i.data.isAfterSale?i.data.isAfterSale:0)})),i.$api.isStoreUser({},(function(t){i.isClerk=t.flag}))}}))):(this.hasLogin=!1,this.getWxCode()),this.userIsSubscription()},navigateToHandle:function(i){if(!this.hasLogin)return this.checkIsLogin();this.$common.navigateTo(i)},orderNavigateHandle:function(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.hasLogin)return this.checkIsLogin();this.$store.commit("orderTab",t),this.$common.navigateTo(i)},goAfterSaleList:function(){if(!this.hasLogin)return this.checkIsLogin();this.$common.navigateTo("../after_sale/list")},showChat:function(){},userIsSubscription:function(){var i=this,t=this.$db.get("userToken");t&&""!=t?this.$api.subscriptionIsTip((function(t){t.status?t.switch?i.suTipStatus=!0:i.suTipStatus=!1:i.suTipStatus=!0})):this.suTipStatus=!0}},computed:{shopMobile:function(){return this.$store.state.config.shop_mobile||0},invoice_switch:function(){return this.$store.state.config.invoice_switch||2},store_switch:function(){return this.$store.state.config.store_switch||0},isTip:function(){return this.suTipStatus}},watch:{}};t.default=a}).call(this,n("543d")["default"])},"62f4":function(i,t,n){"use strict";n.r(t);var e=n("5f37"),o=n.n(e);for(var a in e)"default"!==a&&function(i){n.d(t,i,(function(){return e[i]}))}(a);t["default"]=o.a},"7dfc":function(i,t,n){"use strict";var e=n("d1a8"),o=n.n(e);o.a},a4dc:function(i,t,n){"use strict";(function(i){n("7c19");e(n("66fd"));var t=e(n("f72b"));function e(i){return i&&i.__esModule?i:{default:i}}i(t.default)}).call(this,n("543d")["createPage"])},d1a8:function(i,t,n){},f72b:function(i,t,n){"use strict";n.r(t);var e=n("4f48"),o=n("62f4");for(var a in o)"default"!==a&&function(i){n.d(t,i,(function(){return o[i]}))}(a);n("7dfc");var s,r=n("f0c5"),c=Object(r["a"])(o["default"],e["b"],e["c"],!1,null,"9fee3108",null,!1,e["a"],s);t["default"]=c.exports}},[["a4dc","common/runtime","common/vendor"]]]);