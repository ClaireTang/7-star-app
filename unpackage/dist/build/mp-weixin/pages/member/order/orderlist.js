(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/order/orderlist"],{1250:function(t,n,e){"use strict";e.r(n);var o=e("7e17"),r=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=r.a},4049:function(t,n,e){"use strict";var o=e("4c66"),r=e.n(o);r.a},"4c66":function(t,n,e){},"7e17":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("bbcf");function r(t){return u(t)||i(t)||s(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,n){if(t){if("string"===typeof t)return c(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,n):void 0}}function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return c(t)}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}var d=function(){e.e("components/uni-segmented-control/uni-segmented-control").then(function(){return resolve(e("5a8b"))}.bind(null,e)).catch(e.oe)},l=function(){e.e("components/uni-load-more/uni-load-more").then(function(){return resolve(e("897a"))}.bind(null,e)).catch(e.oe)},m={mixins:[o.orders,o.goods],components:{uniSegmentedControl:d,uniLoadMore:l},data:function(){return{items:["全部","待付款","待发货","已发货","待评价"],list:[],page:1,limit:5,loadStatus:"more",status:[0,1,2,3,4],isReload:!1}},onLoad:function(){this.initData()},onShow:function(){this.isReload&&this.initData()},computed:{tab:function(){return this.$store.state.orderTab}},methods:{initData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.list=[],this.orderList()},onClickItem:function(t){this.tab!==t&&(this.$store.commit("orderTab",t),this.initData())},orderList:function(){var t=this,n={page:this.page,limit:this.limit,status:this.status[this.tab]};this.loadStatus="loading",this.$api.orderList(n,(function(n){if(n.status){var e=n.data.list;n.data.status==t.status[t.tab]&&(t.list=[].concat(r(t.list),r(t.formatOrderStatus(e))),n.data.count>t.list.length?(t.page++,t.loadStatus="more"):t.loadStatus="noMore")}else t.$common.errorToShow(n.msg)})),this.isReload&&(this.isReload=!1)},tackDelivery:function(t){var n=this;this.$common.modelShow("提示","确认执行收货操作吗?",(function(){var e={order_id:n.list[t].order_id};n.$api.confirmOrder(e,(function(e){e.status?n.$common.successToShow("确认收货成功",(function(){0!==n.tab?n.list.splice(t,1):n.initData()})):n.$common.errorToShow(e.msg)}))}))},formatOrderStatus:function(t){var n=this;for(var e in t.forEach((function(t){switch(t.status){case 1:1===t.pay_status?n.$set(t,"order_status_name","待付款"):t.pay_status>=2&&1===t.ship_status?n.$set(t,"order_status_name","待发货"):t.pay_status>=2&&2===t.ship_status?n.$set(t,"order_status_name","部分发货"):t.pay_status>=2&&t.ship_status>=3&&1===t.confirm?n.$set(t,"order_status_name","已发货"):t.pay_status>=2&&t.ship_status>=3&&t.confirm>=2&&1===t.is_comment?n.$set(t,"order_status_name","待评价"):t.pay_status>=2&&t.ship_status>=3&&t.confirm>=2&&t.is_comment>=2&&n.$set(t,"order_status_name","已评价");break;case 2:n.$set(t,"order_status_name","完成");break;case 3:n.$set(t,"order_status_name","取消");break}})),t)for(var o in t[e].items)t[e].items[o].promotion_list=JSON.parse(t[e].items[o].promotion_list);return t}},onReachBottom:function(){"more"==this.loadStatus&&this.orderList()}};n.default=m},a5a9:function(t,n,e){"use strict";var o={uniSegmentedControl:function(){return e.e("components/uni-segmented-control/uni-segmented-control").then(e.bind(null,"5a8b"))},uniLoadMore:function(){return e.e("components/uni-load-more/uni-load-more").then(e.bind(null,"897a"))}},r=function(){var t=this,n=t.$createElement;t._self._c},a=[];e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}))},b18a:function(t,n,e){"use strict";e.r(n);var o=e("a5a9"),r=e("1250");for(var a in r)"default"!==a&&function(t){e.d(n,t,(function(){return r[t]}))}(a);e("4049");var s,i=e("f0c5"),u=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=u.exports},d5b2:function(t,n,e){"use strict";(function(t){e("7c19");o(e("66fd"));var n=o(e("b18a"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])}},[["d5b2","common/runtime","common/vendor"]]]);